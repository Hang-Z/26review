<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸šåŠ¡æ•°æ®è¯„æµ‹ - äººå®¡ vs ç¦»çº¿å¤§æ¨¡å‹å¯¹æ¯”</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            color: white;
            padding: 30px 0 20px 0;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header .subtitle {
            margin-top: 10px;
            font-size: 1.2em;
            opacity: 0.9;
        }
        .total-samples {
            text-align: center;
            color: white;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        .total-samples .label {
            font-size: 1.1em;
            margin-bottom: 5px;
            opacity: 0.9;
        }
        .total-samples .value {
            font-size: 2.5em;
            font-weight: bold;
        }
        .total-samples .breakdown {
            margin-top: 8px;
            font-size: 1em;
            opacity: 0.85;
        }
        .metrics-container {
            margin: 30px 0;
        }
        .metrics-group {
            margin-bottom: 25px;
        }
        .group-title {
            color: white;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            text-align: center;
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        .metric-card.model {
            border-top: 4px solid #e67e22;
        }
        .metric-card.human {
            border-top: 4px solid #9b59b6;
        }
        .metric-label {
            font-size: 0.95em;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }
        .metric-value {
            font-size: 2.8em;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        .metric-detail {
            font-size: 0.9em;
            color: #888;
        }
        .chart-section {
            background: white;
            border-radius: 12px;
            margin: 30px 0;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .chart-title {
            font-size: 1.6em;
            color: #333;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
            text-align: center;
        }
        .chart-subtitle {
            font-size: 0.9em;
            color: #666;
            font-weight: normal;
            display: block;
            margin-top: 8px;
        }
        @media (max-width: 768px) {
            .metrics-row {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 1.8em;
            }
            .total-samples .value {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ é£æ§æ•°æ®åˆ†ææŠ¥å‘Š</h1>
            <div class="subtitle">äººå·¥å®¡æ ¸ vs ç¦»çº¿å¤§æ¨¡å‹ æ€§èƒ½å¯¹æ¯”</div>
        </div>

        <div class="total-samples">
            <div class="label">ğŸ“Š æ•°æ®é›†è§„æ¨¡</div>
            <div class="value">19.5ä¸‡æ¡</div>
            <div class="breakdown">çœŸå®é»‘æ ·æœ¬ 3.15ä¸‡ï¼ˆ16.2%ï¼‰ | çœŸå®ç™½æ ·æœ¬ 16.35ä¸‡ï¼ˆ83.8%ï¼‰</div>
        </div>

        <div class="metrics-container">
            <!-- æ¨¡å‹æŒ‡æ ‡ -->
            <div class="metrics-group">
                <div class="group-title">ğŸ¤– ç¦»çº¿å¤§æ¨¡å‹å‡†ç¡®ç‡</div>
                <div class="metrics-row">
                    <div class="metric-card model">
                        <div class="metric-label">è¯¯æ‹¦ç‡ï¼ˆFPRï¼‰</div>
                        <div class="metric-value">0.12%</div>
                        <div class="metric-detail">è¯¯æ‹¦196ä¸ªç™½æ ·æœ¬</div>
                    </div>
                    <div class="metric-card model">
                        <div class="metric-label">å¬å›ç‡ï¼ˆTPRï¼‰</div>
                        <div class="metric-value">90.5%</div>
                        <div class="metric-detail">è¯†åˆ«28,551ä¸ªé»‘æ ·æœ¬</div>
                    </div>
                    <div class="metric-card model">
                        <div class="metric-label">å‡†ç¡®ç‡</div>
                        <div class="metric-value">98.4%</div>
                        <div class="metric-detail">191,806ä¸ªæ­£ç¡®åˆ¤æ–­</div>
                    </div>
                </div>
            </div>

            <!-- äººå®¡æŒ‡æ ‡ -->
            <div class="metrics-group">
                <div class="group-title">ğŸ‘¥ äººå·¥å®¡æ ¸å‡†ç¡®ç‡</div>
                <div class="metrics-row">
                    <div class="metric-card human">
                        <div class="metric-label">è¯¯æ‹¦ç‡ï¼ˆFPRï¼‰</div>
                        <div class="metric-value">0.92%</div>
                        <div class="metric-detail">è¯¯æ‹¦1,522ä¸ªç™½æ ·æœ¬</div>
                    </div>
                    <div class="metric-card human">
                        <div class="metric-label">å¬å›ç‡ï¼ˆTPRï¼‰</div>
                        <div class="metric-value">49.1%</div>
                        <div class="metric-detail">è¯†åˆ«15,478ä¸ªé»‘æ ·æœ¬</div>
                    </div>
                    <div class="metric-card human">
                        <div class="metric-label">å‡†ç¡®ç‡</div>
                        <div class="metric-value">91.0%</div>
                        <div class="metric-detail">177,451ä¸ªæ­£ç¡®åˆ¤æ–­</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-section">
            <h2 class="chart-title">
                ğŸ“Š æ•°æ®æµå‘åˆ†æå›¾
                <span class="chart-subtitle">æµçº¿å®½åº¦å‡†ç¡®åæ˜ æ•°æ®æ¯”ä¾‹ï¼Œæ¸…æ™°å¯¹æ¯”å¬å›ç‡å·®å¼‚</span>
            </h2>
            <div id="sankey-chart" style="height: 700px;"></div>
        </div>
    </div>

    <script>
        // æ•°æ®å‡†å¤‡
        const total_samples = 195000;
        const actual_black = 31549;
        const actual_white = 163451;

        const human_tp = 15478;
        const human_fp = 1522;
        const human_fn = 16049;
        const human_tn = 161951;

        const model_tp = 28551;
        const model_fp = 196;
        const model_fn = 2998;
        const model_tn = 163255;

        // ç»˜åˆ¶æ”¹è¿›çš„æ¡‘åŸºå›¾ - ç®€åŒ–ç»“æ„
        function drawSankey() {
            const data = [{
                type: "sankey",
                orientation: "h",
                node: {
                    pad: 30,
                    thickness: 25,
                    line: {
                        color: "#333",
                        width: 1
                    },
                    label: [
                        // å·¦ä¾§ï¼šåŸå§‹æ•°æ®
                        `æ€»æ ·æœ¬\n195.0K`,              // 0
                        `çœŸå®é»‘æ ·æœ¬\n31.5K\n(16.2%)`,   // 1
                        `çœŸå®ç™½æ ·æœ¬\n163.5K\n(83.8%)`,  // 2
                        
                        // ä¸­é—´ï¼šäººå®¡åˆ¤æ–­
                        `ğŸ‘¥ äººå®¡åˆ¤é»‘\n17.0K`,           // 3
                        `ğŸ‘¥ äººå®¡åˆ¤ç™½\n178.0K`,          // 4
                        
                        // ä¸­é—´ï¼šæ¨¡å‹åˆ¤æ–­
                        `ğŸ¤– æ¨¡å‹åˆ¤é»‘\n28.7K`,           // 5
                        `ğŸ¤– æ¨¡å‹åˆ¤ç™½\n166.3K`,          // 6
                        
                        // å³ä¾§ï¼šæœ€ç»ˆç»“æœ
                        `âœ“ æ­£ç¡®è¯†åˆ«é»‘`,                // 7
                        `âœ— æ¼åˆ¤é»‘`,                    // 8
                        `âœ— è¯¯æ‹¦ç™½`,                    // 9
                        `âœ“ æ­£ç¡®æ”¾è¿‡ç™½`                 // 10
                    ],
                    color: [
                        "#95a5a6",  // æ€»æ ·æœ¬
                        "#e74c3c",  // çœŸå®é»‘
                        "#3498db",  // çœŸå®ç™½
                        "#9b59b6",  // äººå®¡åˆ¤é»‘
                        "#8e44ad",  // äººå®¡åˆ¤ç™½
                        "#e67e22",  // æ¨¡å‹åˆ¤é»‘
                        "#d35400",  // æ¨¡å‹åˆ¤ç™½
                        "#27ae60",  // æ­£ç¡®è¯†åˆ«
                        "#c0392b",  // æ¼åˆ¤
                        "#e74c3c",  // è¯¯æ‹¦
                        "#27ae60"   // æ­£ç¡®æ”¾è¿‡
                    ]
                },
                link: {
                    source: [
                        // æ€»æ ·æœ¬åˆ†æµ
                        0, 0,
                        
                        // é»‘æ ·æœ¬åˆ°äººå®¡
                        1, 1,
                        // ç™½æ ·æœ¬åˆ°äººå®¡
                        2, 2,
                        
                        // é»‘æ ·æœ¬åˆ°æ¨¡å‹
                        1, 1,
                        // ç™½æ ·æœ¬åˆ°æ¨¡å‹
                        2, 2,
                        
                        // äººå®¡åˆ¤æ–­åˆ°ç»“æœ
                        3, 3,   // äººå®¡åˆ¤é»‘
                        4, 4,   // äººå®¡åˆ¤ç™½
                        
                        // æ¨¡å‹åˆ¤æ–­åˆ°ç»“æœ
                        5, 5,   // æ¨¡å‹åˆ¤é»‘
                        6, 6    // æ¨¡å‹åˆ¤ç™½
                    ],
                    target: [
                        // æ€»æ ·æœ¬åˆ†æµ
                        1, 2,
                        
                        // é»‘æ ·æœ¬åˆ°äººå®¡
                        3, 4,
                        // ç™½æ ·æœ¬åˆ°äººå®¡
                        3, 4,
                        
                        // é»‘æ ·æœ¬åˆ°æ¨¡å‹
                        5, 6,
                        // ç™½æ ·æœ¬åˆ°æ¨¡å‹
                        5, 6,
                        
                        // äººå®¡åˆ¤æ–­åˆ°ç»“æœ
                        7, 9,   // åˆ¤é»‘->æ­£ç¡®/è¯¯æ‹¦
                        10, 8,  // åˆ¤ç™½->æ­£ç¡®/æ¼åˆ¤
                        
                        // æ¨¡å‹åˆ¤æ–­åˆ°ç»“æœ
                        7, 9,   // åˆ¤é»‘->æ­£ç¡®/è¯¯æ‹¦
                        10, 8   // åˆ¤ç™½->æ­£ç¡®/æ¼åˆ¤
                    ],
                    value: [
                        // æ€»æ ·æœ¬åˆ†æµ
                        actual_black, actual_white,
                        
                        // äººå®¡
                        human_tp, human_fn,  // é»‘æ ·æœ¬
                        human_fp, human_tn,  // ç™½æ ·æœ¬
                        
                        // æ¨¡å‹
                        model_tp, model_fn,  // é»‘æ ·æœ¬
                        model_fp, model_tn,  // ç™½æ ·æœ¬
                        
                        // äººå®¡ç»“æœ
                        human_tp, human_fp,  // åˆ¤é»‘
                        human_tn, human_fn,  // åˆ¤ç™½
                        
                        // æ¨¡å‹ç»“æœ
                        model_tp, model_fp,  // åˆ¤é»‘
                        model_tn, model_fn   // åˆ¤ç™½
                    ],
                    color: [
                        // æ ¹æ®æµå‘è®¾ç½®é¢œè‰²
                        "rgba(231, 76, 60, 0.4)",    // æ€»->é»‘
                        "rgba(52, 152, 219, 0.4)",   // æ€»->ç™½
                        
                        // äººå®¡
                        "rgba(155, 89, 182, 0.6)",   // é»‘->äººå®¡åˆ¤é»‘ï¼ˆå¬å›ï¼‰
                        "rgba(155, 89, 182, 0.3)",   // é»‘->äººå®¡åˆ¤ç™½ï¼ˆæ¼åˆ¤ï¼‰
                        "rgba(155, 89, 182, 0.3)",   // ç™½->äººå®¡åˆ¤é»‘ï¼ˆè¯¯æ‹¦ï¼‰
                        "rgba(155, 89, 182, 0.6)",   // ç™½->äººå®¡åˆ¤ç™½ï¼ˆæ­£ç¡®ï¼‰
                        
                        // æ¨¡å‹
                        "rgba(230, 126, 34, 0.7)",   // é»‘->æ¨¡å‹åˆ¤é»‘ï¼ˆå¬å›ï¼‰
                        "rgba(230, 126, 34, 0.3)",   // é»‘->æ¨¡å‹åˆ¤ç™½ï¼ˆæ¼åˆ¤ï¼‰
                        "rgba(230, 126, 34, 0.3)",   // ç™½->æ¨¡å‹åˆ¤é»‘ï¼ˆè¯¯æ‹¦ï¼‰
                        "rgba(230, 126, 34, 0.7)",   // ç™½->æ¨¡å‹åˆ¤ç™½ï¼ˆæ­£ç¡®ï¼‰
                        
                        // ç»“æœ
                        "rgba(39, 174, 96, 0.6)",    // äººå®¡æ­£ç¡®è¯†åˆ«
                        "rgba(231, 76, 60, 0.6)",    // äººå®¡è¯¯æ‹¦
                        "rgba(39, 174, 96, 0.6)",    // äººå®¡æ­£ç¡®æ”¾è¿‡
                        "rgba(231, 76, 60, 0.6)",    // äººå®¡æ¼åˆ¤
                        
                        "rgba(39, 174, 96, 0.6)",    // æ¨¡å‹æ­£ç¡®è¯†åˆ«
                        "rgba(231, 76, 60, 0.6)",    // æ¨¡å‹è¯¯æ‹¦
                        "rgba(39, 174, 96, 0.6)",    // æ¨¡å‹æ­£ç¡®æ”¾è¿‡
                        "rgba(231, 76, 60, 0.6)"     // æ¨¡å‹æ¼åˆ¤
                    ],
                    label: [
                        "", "",
                        
                        // äººå®¡
                        `äººå®¡å¬å› ${(human_tp/actual_black*100).toFixed(1)}%`,
                        `äººå®¡æ¼åˆ¤ ${(human_fn/actual_black*100).toFixed(1)}%`,
                        `äººå®¡è¯¯æ‹¦ ${(human_fp/actual_white*100).toFixed(2)}%`,
                        `æ­£ç¡®æ”¾è¿‡`,
                        
                        // æ¨¡å‹
                        `æ¨¡å‹å¬å› ${(model_tp/actual_black*100).toFixed(1)}%`,
                        `æ¨¡å‹æ¼åˆ¤ ${(model_fn/actual_black*100).toFixed(1)}%`,
                        `æ¨¡å‹è¯¯æ‹¦ ${(model_fp/actual_white*100).toFixed(2)}%`,
                        `æ­£ç¡®æ”¾è¿‡`,
                        
                        // ç»“æœ
                        `${(human_tp/1000).toFixed(1)}K`,
                        `${(human_fp/1000).toFixed(1)}K`,
                        `${(human_tn/1000).toFixed(1)}K`,
                        `${(human_fn/1000).toFixed(1)}K`,
                        
                        `${(model_tp/1000).toFixed(1)}K`,
                        `${model_fp}ä¸ª`,
                        `${(model_tn/1000).toFixed(1)}K`,
                        `${(model_fn/1000).toFixed(1)}K`
                    ],
                    hovertemplate: '%{label}<br>æ•°é‡: %{value:,.0f}<extra></extra>'
                }
            }];

            const layout = {
                font: {
                    size: 13,
                    family: 'Microsoft YaHei, Segoe UI, sans-serif'
                },
                margin: {
                    l: 20,
                    r: 150,
                    t: 30,
                    b: 30
                },
                paper_bgcolor: 'white',
                plot_bgcolor: 'white'
            };

            const config = {
                responsive: true,
                displayModeBar: false
            };

            Plotly.newPlot('sankey-chart', data, layout, config);
        }

        // é¡µé¢åŠ è½½å®Œæˆåç»˜åˆ¶å›¾è¡¨
        document.addEventListener('DOMContentLoaded', function() {
            drawSankey();
        });

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡ç»˜
        window.addEventListener('resize', function() {
            Plotly.Plots.resize('sankey-chart');
        });
    </script>
</body>
</html>